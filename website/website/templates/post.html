{% extends 'base.html' %}


{% block title %} Login {% endblock %}

{% block main %}
<div class="container-fluid post-main">
    <div class="row flash-msg-post">
        {% with messages = get_flashed_messages(with_categories = true) %}
        {% if messages %}
        {% for category, message in messages %}
        {% if category == 'success' %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <p class="flash-msg-post1">{{message}}</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% else %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <p class="flash-msg-post1">{{message}}</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {%  endif %}
        {% endfor%}
        {% endif %}
        {% endwith %}
    
</div>
    <div class="row post-main2">
       
        <div class="col-lg-12">
           {% if posts %}
           {% for post in posts %}
           <a href="{{ url_for('show_post', post_id=post.id) }}">
           <h1>{{post.title}}</h1>
           <h5>Written by: {{post.author_name}} on {{post.date}}</h5></a>
           <hr>
           {% endfor %}
           {% endif %}
           {% if current_user.is_authenticated %}
           <a href="/new_post" class="btn btn-primary">Create New Post</a>
           {% endif %}
        </div>
    </div>
</div>
{% endblock %}
